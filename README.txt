Note: run on release build for top performance